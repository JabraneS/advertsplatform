{# app/Resources/views/layout.html.twig #}

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}{{'layout.1'|trans }}{% endblock %}</title>{# Platforme d\'annonces #}

    {% block stylesheets %}
      {# On charge le CSS de bootstrap depuis le site directement #}
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

      
      {% stylesheets '@JOMANELCoreBundle/Resources/public/css/main.css' %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
      {% endstylesheets %}

      {% stylesheets '@JOMANELPlatformBundle/Resources/public/css/main.css' %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
      {% endstylesheets %}
      
    {% endblock %}
  </head>

  <body>
    
    <div class="container-fluid">
      
      <!--navbar-->
      <nav class="navbar navbar-inverse">
        
        <div class="container-fluid">
          
          <!--"logo" : Adverts Platform-->
          <div class="navbar-header">
            <a class="navbar-brand" href="{{ path('jomanel_core_homepage') }}">{{'layout.2'|trans }}</a>{# Adverts Platform #}
          </div>
          <!---->

          <!--languages-->
          <div class="navbar-header">
            
            <ul class="nav navbar-nav">
              {% if (app.request.getLocale()) == 'fr' %}
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ 'layout.3'|trans }} <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li class="dropdown-header"><strong>{{ 'layout.4'|trans }}</strong></li>
                    <li class="active"><a href="#"> Fr</a></li>
                    <li><a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale': 'en'})) }}"> En</a></li>
                  </ul>
                </li>
              {% endif %}
              
              {% if (app.request.getLocale()) == 'en' %}
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ 'layout.5'|trans }} <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li class="dropdown-header"><strong>{{ 'layout.6'|trans }}</strong></li>
                    <li class=""><a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale': 'fr'})) }}"> Fr</a></li>
                    <li class="active"><a href=""> En</a></li>
                  </ul>
                </li>
              {% endif %}
            </ul>

          </div>
          <!---->

          <!-- btn sign in/log out/...etc-->
          <div class="navbar-header">
            
            <ul class="nav navbar-nav">
              
              {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ app.user.username }} <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ path('fos_user_security_logout') }}">{{'layout.8'|trans }}</a></li>{#logout#}
                    <li><a href="{{ path('fos_user_change_password') }}">{{'layout.24'|trans }}</a></li>{#change_password#}
                  </ul>
                </li>
              
              {% else %}
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{'layout.9'|trans }}{#sign in#} <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ path('fos_user_security_login') }}">{{'layout.9'|trans }}</a></li>{#sign in#}
                    <li><a href="{{ path('fos_user_registration_register') }}">{{'layout.10'|trans }}</a></li>{#register#}
                    <li><a href="{{ path('fos_user_resetting_request') }}">{{'layout.23'|trans }}</a></li>{#forgot pass#}
                  </ul>
                </li>

              {% endif %}

            </ul><!--<ul class="nav navbar-nav">-->

          </div>
          <!---->

        </div><!--container -->

      </nav><!--<nav class="navbar navbar-inverse navbar-fixed-top">-->
      <!---->


      <!--msg to users-->
      <div class="container-fluid" id="menu"  style="background: orange; text-align: center;">    
        {{'layout.25'|trans }} {#msg to users#}
      </div>    
      <!---->


      <div class="row">

        <div id="menu" class="col-md-3">
          
          <h3>{{'layout.12'|trans }}</h3>{# Les annonces #}
          <ul class="nav nav-pills nav-stacked">
            <li><a href="{{ path('jomanel_platform_home') }}">{{'layout.13'|trans }}</a></li>{# Accueil #}
            {% if is_granted('ROLE_ADMIN') %}
              <li><a href="{{ path('jomanel_platform_add') }}">{{'layout.14'|trans }}</a></li>{# Ajouter une annonce #}
              <li><a href="{{ path('jomanel_platform_purge') }}">{{'layout.15'|trans }}</a></li>{# Purger les annonces #}
            {% endif %}
          </ul>
          
          <h3>{{'layout.16'|trans }}</h3>{# Catégories #}
          <ul class="nav nav-pills nav-stacked">
            {% if is_granted('ROLE_ADMIN') %}
              <li><a href="{{ path('jomanel_platform_homeCategory') }}">{{'layout.18'|trans }}</a></li>{#Liste des catégories#}
              <li><a href="{{ path('jomanel_platform_addCategory') }}">{{'layout.17'|trans }}</a></li>{#Ajouter une catégorie#}
            {% endif %}
            <li><a href="{{ path('jomanel_platform_findAdverts') }}">{{'layout.22'|trans }}</a></li>{# Trouver les annonces#}
          </ul>

          <h4>{{'layout.19'|trans }}</h4>{# Dernières annonces #}
          {{ render(controller("JOMANELPlatformBundle:Advert:menu", {'limit': 3})) }}

        </div>

        <div id="content" class="col-md-9">
          {% block body %}
          {% endblock %}
        </div>
      </div>

      <hr>

      <footer>
        <div>
          <p>{{'layout.20'|trans }} © {{ 'now'|date('Y') }} {{'layout.21'|trans }}.</p>{#Le ciel est la limite#}{#et au-delà#}
          <p>{{'layout.25'|trans }}</p>
        </div>
      </footer>

    </div><!--<div class="container">-->

    {% block javascripts %}
      {# Ajoutez ces lignes JavaScript si vous comptez vous servir des fonctionnalités du bootstrap Twitter #}
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    {% endblock %}

  </body>
</html>